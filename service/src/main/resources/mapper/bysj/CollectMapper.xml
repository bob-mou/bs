<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.bysj.mapper.CollectMapper">

    <resultMap type="com.ruoyi.bysj.domain.Collect" id="CollectResult">
        <result property="patientId" column="patient_ID"/>
        <result property="doctorId" column="doctor_ID"/>
        <result property="creatTime" column="creat_time"/>
        <result property="status" column="status"/>
        <result property="remark" column="remark"/>
        <result property="doctorName" column="doctor_name"/>
        <result property="patientName" column="patient_name"/>
    </resultMap>
    <sql id="selectCollectVo">
         select ctable.*,dtable.nick_name as doctor_name from
         (select atable.*,btable.nick_name as patient_name  from
         (select patient_ID, doctor_ID, creat_time, status, remark from Collect) as atable  join
         (select sys_user.* from sys_user where sys_user.user_type=104 ) as btable on btable.user_id=atable.patient_ID)as ctable join
         (select sys_user.* from sys_user where sys_user.user_type=100) as dtable  on dtable.user_id=ctable.doctor_ID
    </sql>

</mapper>
